<ion-view>
    <ion-nav-title>
        <span translate>agenda.agendamentos</span>
    </ion-nav-title>
    <calvin-pagination searcher="searcher" ng-model="agendamentos" cache="agendamentos" not-found-message="usuario.pastor" >
        <ion-list>
            <ion-item class="item-text-wrap" 
                      ng-repeat="agendamento in agendamentos">
                <h2>
                    {{agendamento.dataHoraInicio | date:'dd MMMM yyyy HH:mm'}}
                    - {{agendamento.dataHoraFim | date:'HH:mm'}}
                </h2>
                <p>
                    <span ng-if='!usuario.pastor'>{{agendamento.calendario.pastor.nome}} </span>
                    <span ng-if='usuario.pastor'>{{agendamento.membro.nome}} </span>
                    <span ng-if='!agendamento.concluido && !agendamento.confirmado' class='item-note assertive'>{{'agenda.status.NAO_CONFIRMADO' | translate}}</span>
                    <span ng-if='!agendamento.concluido && agendamento.confirmado' class='item-note positive'>{{'agenda.status.CONFIRMADO' | translate}}</span>
                    <span ng-if='agendamento.concluido' class='item-note'>{{'agenda.status.CONCLUIDO' | translate}}</span>
                </p>

                <ion-option-button ng-if="!agendamento.concluido" 
                                   ng-click='cancela(agendamento)'
                                   class='icon-left ion-trash-a'>
                    {{'agenda.cancelar_agendamento' | translate}}
                </ion-option-button>
                <ion-option-button ng-if="usuario.pastor && !agendamento.confirmado" 
                                   ng-click='confirma(agendamento)'
                                   class='icon-left ion-checkmark'>
                    {{'agenda.confirmar_agendamento' | translate}}
                </ion-option-button>
            </ion-item>
            <ion-item ng-if='!usuario.pastor'>
                <button class='button button-block' ui-sref='agenda.novo'>
                    {{'agenda.novo_agendamento' | translate}}
                </button>
            </ion-item>
        </ion-list>
    </calvin-pagination>
</ion-view>
