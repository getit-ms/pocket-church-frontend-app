<ion-view cache-view="false">
    <ion-nav-title>
        <span translate>agenda.agendamentos</span>
    </ion-nav-title>
    <calvin-pagination searcher="searcher" ng-model="agendamentos" cache="agendamentos" >
        <div ng-repeat="agendamento in agendamentos" ng-click='$parent.aselecionado = agendamento.id'>
            <div class="item item-body" ng-class="{'item-button-right':!agendamento.concluido}">
                <h2>
                    {{agendamento.dataHoraInicio | date:'dd MMMM yyyy HH:mm'}}
                    - {{agendamento.dataHoraFim | date:'HH:mm'}}
                </h2>
                <p>
                    <span ng-if='!usuario.pastor'>{{agendamento.calendario.pastor.nome}} </span>
                    <span ng-if='usuario.pastor'>{{agendamento.membro.nome}} </span>
                    <span ng-if='!agendamento.concluido && !agendamento.confirmado' class='item-note assertive'>{{'agenda.status.NAO_CONFIRMADO' | translate}}</span>
                    <span ng-if='!agendamento.concluido && agendamento.confirmado' class='item-note positive'>{{'agenda.status.CONFIRMADO' | translate}}</span>
                    <span ng-if='agendamento.concluido' class='item-note'>{{'agenda.status.CONCLUIDO' | translate}}</span>
                </p>

                <div class="buttons">
                    <a ng-if="!agendamento.concluido" ng-click='cancela(agendamento)'
                       title="{{'agenda.cancelar_agendamento' | translate}}"
                       class='button icon fa fa-trash'>
                    </a>
                    <a ng-if="usuario.pastor &&   !agendamento.confirmado" ng-click='confirma(agendamento)'
                       title="{{'agenda.confirmar_agendamento' | translate}}"
                       class='button icon fa fa-check'>
                    </a>
                </div>
            </div>
        </div>
        <div class='item' ng-if='!usuario.pastor'>
            <button class='button button-block' ui-sref='agenda.novo'>
                {{'agenda.novo_agendamento' | translate}}
            </button>
        </div>
    </calvin-pagination>
</ion-view>
